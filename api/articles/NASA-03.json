{"title":"NASA-03","uid":"e1649b2caf89f596a96590432091889f","slug":"NASA-03","date":"2024-03-03T16:00:00.000Z","updated":"2024-04-17T09:37:48.854Z","comments":true,"path":"api/articles/NASA-03.json","keywords":null,"cover":[],"content":"<h1 id=\"NASA-HW3\"><a href=\"#NASA-HW3\" class=\"headerlink\" title=\"NASA HW3\"></a>NASA HW3</h1><h2 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h2><p>b12202064<br>Arch wiki</p>\n<div style=\"page-break-after:always;\"></div>\n\n\n<h2 id=\"1-Initial-partition\"><a href=\"#1-Initial-partition\" class=\"headerlink\" title=\"1 Initial partition\"></a>1 Initial partition</h2><p>使用 <code>cfdisk</code> 建立分區<br><img src=\"https://hackmd.io/_uploads/S1i-wWsap.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 06_09_46\"></p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"2-RAID-Setup\"><a href=\"#2-RAID-Setup\" class=\"headerlink\" title=\"2 RAID Setup\"></a>2 RAID Setup</h2><p>使用 <code>mdadm</code> 建立raid陣列</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mdadm --create --verbose \\</span><br><span class=\"line\">\t--level=10 \\</span><br><span class=\"line\">\t--metadata=1.2 \\</span><br><span class=\"line\">\t--raid-devices=4 \\</span><br><span class=\"line\">\t/dev/md/data \\</span><br><span class=\"line\">\t/dev/vdc /dev/vdd /dev/vde /dev/vdf</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mdadm --create --verbose \\</span><br><span class=\"line\">\t--level=0 \\</span><br><span class=\"line\">\t--metadata=1.2 \\</span><br><span class=\"line\">\t--raid-devices=2 \\</span><br><span class=\"line\">\t/dev/md/linux \\</span><br><span class=\"line\">\t/dev/vdc /dev/vdd /dev/vde /dev/vdf</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://hackmd.io/_uploads/S1XD2-saa.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 06_32_49\"></p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"3-Disk-encryption\"><a href=\"#3-Disk-encryption\" class=\"headerlink\" title=\"3 Disk encryption|\"></a>3 Disk encryption|</h2><p>ref <a href=\"https://wiki.archlinux.org/title/dm-crypt/Device_encryption\">https://wiki.archlinux.org/title/dm-crypt/Device_encryption</a></p>\n<p>cryptboot:<br><code>cryptsetup luksFormat --type luks1 /dev/vda2</code></p>\n<p>輸入密碼</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cryptsetup open /dev/vda2 cryptboot</span><br><span class=\"line\"></span><br><span class=\"line\">dd if=/dev/urandom of=/root/key_file bs=256 count=1</span><br><span class=\"line\">cryptsetup luksAddKey /dev/vda2 /root/key_file</span><br></pre></td></tr></table></figure>\n<p>cryptroot:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cryptsetup luksFormat --type luks2 /dev/md/linux /root/key_file  </span><br><span class=\"line\">cryptsetup open --type luks2 /dev/md/linux cryptroot --key-file /root/key_file</span><br><span class=\"line\">cryptsetup luksAddKey /dev/md/linux</span><br></pre></td></tr></table></figure>\n<p>輸入密碼<br>cryptdata:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cryptsetup luksFormat --type luks2 /dev/md/linux </span><br><span class=\"line\">cryptsetup open --type luks2 /dev/md/data cryptroot --key-file /root/key_file</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://hackmd.io/_uploads/ryI74MjTp.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 07_06_01\"></p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"4-LVM\"><a href=\"#4-LVM\" class=\"headerlink\" title=\"4 LVM\"></a>4 LVM</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreate /dev/mapper/linux</span><br><span class=\"line\">vgcreate linux /dev/mapper/linux</span><br><span class=\"line\"></span><br><span class=\"line\">lvcreate -L 256M -n home linux</span><br><span class=\"line\">lvcreate -l 100%FREE -n root linux</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://hackmd.io/_uploads/SyNOHziaT.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 07_11_11\"></p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"5-Formatting\"><a href=\"#5-Formatting\" class=\"headerlink\" title=\"5 Formatting\"></a>5 Formatting</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext4 /dev/linux/home</span><br><span class=\"line\">mkfs.ext4 /dev/linux/root</span><br><span class=\"line\"></span><br><span class=\"line\">mkfs.xfs /dev/mapper/cryptdata</span><br><span class=\"line\">mkfs.ext2 /dev/mapper/cryptboot</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://hackmd.io/_uploads/B1Vl9fjTT.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 07_30_28\"></p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"6-mount\"><a href=\"#6-mount\" class=\"headerlink\" title=\"6 mount\"></a>6 mount</h2><ol>\n<li><p><strong>掛載 &#x2F;dev&#x2F;linux&#x2F;root 到 &#x2F;mnt：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount /dev/linux/root /mnt</span><br></pre></td></tr></table></figure></li>\n<li><p><strong>創建 &#x2F;mnt&#x2F;home 目錄，然後掛載 &#x2F;dev&#x2F;linux&#x2F;home 到 &#x2F;mnt&#x2F;home：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /mnt/home</span><br><span class=\"line\">mount /dev/linux/home /mnt/home</span><br></pre></td></tr></table></figure>\n\n</li>\n<li><p><strong>創建 &#x2F;mnt&#x2F;boot 目錄，然後掛載 &#x2F;dev&#x2F;mapper&#x2F;cryptboot 到 &#x2F;mnt&#x2F;boot：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /mnt/boot</span><br><span class=\"line\">mount /dev/mapper/cryptboot /mnt/boot</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>創建 &#x2F;mnt&#x2F;data 目錄，然後掛載 &#x2F;dev&#x2F;mapper&#x2F;cryptdata 到 &#x2F;mnt&#x2F;data：</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /mnt/data</span><br><span class=\"line\">mount /dev/mapper/cryptdata /mnt/data</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://hackmd.io/_uploads/BJOecfipp.png\" alt=\"NASA_HW3_WS1 (QEMU) - RealVNC Viewer 2024_3_10 下午 07_30_28\"></p>\n</li>\n</ol>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h2><p>安裝必要</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># pacstrap /mnt base linux linux-firmware</span><br><span class=\"line\"># pacstrap /mnt mdadm、lvm2</span><br><span class=\"line\"># pacstrap /mnt vim man-db</span><br></pre></td></tr></table></figure>\n<p>生成符合作業要求的 fstab</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># arch-chroot /mnt</span><br><span class=\"line\">/etc/hostname</span><br></pre></td></tr></table></figure>\n<p>修該mkinitcpio</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/mkinitcpio.cong</span><br><span class=\"line\"># mkinitcpio -P</span><br></pre></td></tr></table></figure>\n<p>編輯 crypttab</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/crypttab</span><br></pre></td></tr></table></figure>\n\n<p>安裝 GRUB<br><a href=\"https://wiki.archlinuxcn.org/wiki/GRUB\">https://wiki.archlinuxcn.org/wiki/GRUB</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n\n<p>結束<br>成功進入系統但是來不及截圖了(3&#x2F;10 09:55)</p>\n<div style=\"page-break-after:always;\"></div>\n\n<h2 id=\"8-Trivia（32-分，每題-4-分）\"><a href=\"#8-Trivia（32-分，每題-4-分）\" class=\"headerlink\" title=\"8. Trivia（32 分，每題 4 分）\"></a>8. Trivia（32 分，每題 4 分）</h2><p>以下為簡答題，若有過程中用到的指令也請一併附上。請讓你的答案簡短扼要，非必要的資訊<br>可以省略。</p>\n<h3 id=\"a\"><a href=\"#a\" class=\"headerlink\" title=\"(a)\"></a>(a)</h3><p>一個使用中的硬碟上除了已經切好的 partition 外，還會有什麼東西？</p>\n<p>除了已經切好的 partition 外，硬碟上可能還有檔案系統、檔案、目錄等資料。</p>\n<h3 id=\"b\"><a href=\"#b\" class=\"headerlink\" title=\"(b)\"></a>(b)</h3><p>在工作站上輸入 df &#x2F; 指令時，會得到下圖的輸出，請問為什麼 Available + Used &lt; 1Kblocks？<br>Figure 4: df 指令的輸出</p>\n<h3 id=\"c\"><a href=\"#c\" class=\"headerlink\" title=\"(c)\"></a>(c)</h3><p>什麼是 FUSE (Filesystem in Userspace)？請簡單介紹它的原理，給出一個優點和缺點，並<br>舉出一個在 Linux 上用了這項技術才能支援的檔案系統。</p>\n<p>FUSE 是一個允許非特權用戶在使用者空間實現檔案系統的工具。原理是透過使用者空間的程式和內核模塊通信。優點是不需特權權限即可實現新檔案系統，缺點是性能可能較低。</p>\n<p>例子：sshfs。</p>\n<h3 id=\"d\"><a href=\"#d\" class=\"headerlink\" title=\"(d)\"></a>(d)</h3><p>你在幫新的硬碟建立分割區的時候可能看過 MBR 和 GPT 這兩個詞。請問他們分別代表<br>了什麼，並列出至少兩個差別。</p>\n<p>MBR 是 Master Boot Record，<br>GPT 是 GUID Partition Table。</p>\n<p>差異包括分割數量限制、硬碟大小支援、資料備份位置等。</p>\n<h3 id=\"e\"><a href=\"#e\" class=\"headerlink\" title=\"(e)\"></a>(e)</h3><p>許多修 NASA 的同學都會有一台同時裝了 Windows 和 Linux 的電腦。為了避免浪費儲存空間，你可能會享有同時被這兩個作業系統支援的硬碟來存放你常用的大檔案 (e.g. Steam遊戲庫)。請找到滿足以下條件的檔案系統，並給出掛載這個檔案系統需要用到的指令 (例如：mount -t ext4 &#x2F;dev&#x2F;sda &#x2F;mnt)：<br>• 能支援超過 4 GiB 的單一檔案<br>• 兩個系統 (Windows 11, Arch Linux) 皆原生支援讀寫（即不須另外的驅動程式&#x2F;KernelModule，且不得使用 FUSE 來掛載）<br>• 在 Windows 11 下支援日誌功能 (日誌檔案系統)</p>\n<p>檔案系統: NTFS</p>\n<p>指令:<code> mount -t ntfs /dev/sdX /mnt</code> (根據需求)</p>\n<p><a href=\"https://wiki.archlinux.org/title/NTFS\">https://wiki.archlinux.org/title/NTFS</a></p>\n<h3 id=\"f\"><a href=\"#f\" class=\"headerlink\" title=\"(f)\"></a>(f)</h3><p>根據 SI 及 IEC 的定義，GB 和 GiB 分別指的是多少 Bytes？在工作站上使用 ls -lh 時，預設使用的是哪種單位呢？</p>\n<p>GB &#x3D; 1,000,000,000 Bytes，GiB &#x3D; 1,073,741,824 Bytes。<br>ls -lh 預設使用 SI 單位。</p>\n<h3 id=\"g\"><a href=\"#g\" class=\"headerlink\" title=\"(g)\"></a>(g)</h3><p>假設都是 4 個硬碟，請比較它們組成 RAID 0, RAID 10, RAID 5, RAID 6 的容錯能力、讀取速度、寫入速度。容錯能力指的是最多可以幾顆硬碟損壞而不造成資料遺失。<br>而讀取和寫入速度則假設不需考慮計算、讀寫 parity 資料的額外時間。</p>\n<ul>\n<li>RAID 0: 低容錯，高讀寫速度。</li>\n<li>RAID 10: 最多損壞一半硬碟，高讀寫速度，優秀容錯。</li>\n<li>RAID 5: 一顆硬碟損壞，可還原，中等讀寫速度，中容錯。</li>\n<li>RAID 6: 兩顆硬碟損壞，可還原，稍低讀寫速度，高容錯。</li>\n</ul>\n<h3 id=\"h\"><a href=\"#h\" class=\"headerlink\" title=\"(h)\"></a>(h)</h3><p>當使用 VM 時，如果發現將它的多個虛擬硬碟組成 RAID 0 時，其寫入速度和沒有 RAID 時幾乎沒有差別，請問可能會是什麼原因呢？</p>\n<p>可能是因為虛擬硬碟實際存放在同一實體硬碟上，無法充分發揮 RAID 0 的並行讀寫優勢，造成速度沒有差異</p>\n","feature":false,"text":"NASA HW3refb12202064Arch wiki 1 Initial partition使用 cfdisk 建立分區 2 RAID Setup使用 m...","permalink":"/post/NASA-03","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"NASA","slug":"NASA","count":8,"path":"api/tags/NASA.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#NASA-HW3\"><span class=\"toc-text\">NASA HW3</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ref\"><span class=\"toc-text\">ref</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-Initial-partition\"><span class=\"toc-text\">1 Initial partition</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-RAID-Setup\"><span class=\"toc-text\">2 RAID Setup</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-Disk-encryption\"><span class=\"toc-text\">3 Disk encryption|</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-LVM\"><span class=\"toc-text\">4 LVM</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-Formatting\"><span class=\"toc-text\">5 Formatting</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-mount\"><span class=\"toc-text\">6 mount</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7\"><span class=\"toc-text\">7</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-Trivia%EF%BC%8832-%E5%88%86%EF%BC%8C%E6%AF%8F%E9%A1%8C-4-%E5%88%86%EF%BC%89\"><span class=\"toc-text\">8. Trivia（32 分，每題 4 分）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#a\"><span class=\"toc-text\">(a)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#b\"><span class=\"toc-text\">(b)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#c\"><span class=\"toc-text\">(c)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#d\"><span class=\"toc-text\">(d)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#e\"><span class=\"toc-text\">(e)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#f\"><span class=\"toc-text\">(f)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#g\"><span class=\"toc-text\">(g)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#h\"><span class=\"toc-text\">(h)</span></a></li></ol></li></ol></li></ol>","author":{"name":"G36maid","slug":"blog-author","avatar":"https://i.imgur.com/iNUcO0p.jpg","link":"/","description":"","socials":{"github":"https://github.com/G36maid","twitter":"https://twitter.com/SjLwrO14y68R3Dw","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"NASA-04","uid":"e0230616a66570d701934c98e3ecd1c8","slug":"NASA-04","date":"2024-03-10T16:00:00.000Z","updated":"2024-04-17T09:37:48.854Z","comments":true,"path":"api/articles/NASA-04.json","keywords":null,"cover":[],"text":"NASA HW 04學生鍾詠傑學號41173058H 1. 迷星叫1.在 Cisco Switch 上我們可以指定一個埠口為 Access Port 或者 Tr...","permalink":"/post/NASA-04","photos":[],"count_time":{"symbolsCount":"7.8k","symbolsTime":"7 mins."},"categories":[],"tags":[{"name":"NASA","slug":"NASA","count":8,"path":"api/tags/NASA.json"}],"author":{"name":"G36maid","slug":"blog-author","avatar":"https://i.imgur.com/iNUcO0p.jpg","link":"/","description":"","socials":{"github":"https://github.com/G36maid","twitter":"https://twitter.com/SjLwrO14y68R3Dw","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":false},"next_post":{"title":"NASA-02","uid":"764ef6a6164b61a74508cb7ba2b86d7f","slug":"NASA-02","date":"2024-02-25T16:00:00.000Z","updated":"2024-04-17T09:37:48.854Z","comments":true,"path":"api/articles/NASA-02.json","keywords":null,"cover":null,"text":"NASA HW2學生: 鍾詠傑學號: 411783058h refskyhong交流程式架構 PixelCatdiff_output 的format Peach...","permalink":"/post/NASA-02","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"NASA","slug":"NASA","count":8,"path":"api/tags/NASA.json"}],"author":{"name":"G36maid","slug":"blog-author","avatar":"https://i.imgur.com/iNUcO0p.jpg","link":"/","description":"","socials":{"github":"https://github.com/G36maid","twitter":"https://twitter.com/SjLwrO14y68R3Dw","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":false}}